{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Mgo\\\\PhpstormProjects\\\\untitled\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Mgo\\\\PhpstormProjects\\\\untitled\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Mgo\\\\PhpstormProjects\\\\untitled\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Mgo\\\\PhpstormProjects\\\\untitled\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Mgo\\\\PhpstormProjects\\\\untitled\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Mgo\\\\PhpstormProjects\\\\untitled\\\\src\\\\components\\\\MovieForm.js\";\nimport React from 'react';\nimport Form from \"./Form\";\nimport Joi from \"joi-browser\";\nimport { getGenres } from \"../services/fakeGenreService\";\nimport { getMovie, saveMovie } from \"../services/fakeMovieService\";\n\nvar MovieForm =\n/*#__PURE__*/\nfunction (_Form) {\n  _inherits(MovieForm, _Form);\n\n  function MovieForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MovieForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MovieForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: {\n        title: \"\",\n        genre: \"\",\n        NumberStock: \"\",\n        rate: \"\"\n      },\n      //lets for now forget the genre properties\n      error: {},\n      genres: []\n    };\n    _this.schema = {\n      title: Joi.string().required().label(\"Title\"),\n      NumberStock: Joi.number().required().min(0).max(100),\n      rate: Joi.number().required().min(0).max(10),\n      genre: Joi.string().required().label(\"Genre\")\n    };\n\n    _this.doSubmit = function () {\n      // console.log(\"Submitted\");\n      saveMovie(_this.state.data);\n    };\n\n    _this.changingDBtodta = function (movie) {\n      return {\n        _id: movie._id,\n        title: movie.title,\n        genre: movie.genre._id,\n        NumberStock: movie.numberInStock,\n        rate: movie.dailyRentalRate\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(MovieForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var genres = getGenres();\n      this.setState({\n        genres: genres\n      });\n      var movieId = this.props.match.params.id;\n      if (movieId === 'new') return;\n      var movie = getMovie(movieId);\n      if (!movie) return this.props.history.replace(\"/not-found\");\n      this.setState({\n        data: this.changingDBtodta(movie)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        className: \"backk\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"Movie Form\"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, this.renderInput(\"title\", \"Title\"), this.renderSelect('genre', \"Genre\", this.state.genres), this.renderInput(\"NumberStock\", \"Number in Stock\"), this.renderInput(\"rate\", \"Rate\"), this.renderButton(\"Submit\")));\n    }\n  }]);\n\n  return MovieForm;\n}(Form);\n\nexport default MovieForm;","map":{"version":3,"sources":["C:\\Users\\Mgo\\PhpstormProjects\\untitled\\src\\components\\MovieForm.js"],"names":["React","Form","Joi","getGenres","getMovie","saveMovie","MovieForm","state","data","title","genre","NumberStock","rate","error","genres","schema","string","required","label","number","min","max","doSubmit","changingDBtodta","movie","_id","numberInStock","dailyRentalRate","setState","movieId","props","match","params","id","history","replace","handleSubmit","renderInput","renderSelect","renderButton"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Form from \"./Form\"\r\nimport Joi from \"joi-browser\"\r\nimport { getGenres} from \"../services/fakeGenreService\";\r\nimport {getMovie, saveMovie} from \"../services/fakeMovieService\"\r\nclass MovieForm extends Form  {\r\n    state={\r\n      data:{title:\"\",genre:\"\",NumberStock:\"\",rate:\"\"},//lets for now forget the genre properties\r\n        error:{},\r\n        genres:[]\r\n    };\r\n    schema={\r\n      title:Joi.string()\r\n          .required()\r\n          .label(\"Title\"),\r\n       NumberStock: Joi.number()\r\n           .required()\r\n           .min(0)\r\n           .max(100),\r\n        rate:Joi.number()\r\n            .required()\r\n            .min(0)\r\n            .max(10),\r\n        genre:Joi.string()\r\n            .required()\r\n            .label(\"Genre\")\r\n\r\n    };\r\n    doSubmit = () => {\r\n        // console.log(\"Submitted\");\r\n        saveMovie(this.state.data);\r\n\r\n    };\r\n    componentDidMount() {\r\n        const genres = getGenres();\r\n        this.setState({ genres });\r\n\r\n        const movieId=this.props.match.params.id;\r\n        if(movieId==='new')return;\r\n\r\n        const movie = getMovie(movieId);\r\n        if (!movie) return this.props.history.replace(\"/not-found\");\r\n\r\n    this.setState({data:this.changingDBtodta(movie)});\r\n    }\r\n\r\n    changingDBtodta=(movie)=>{\r\n        return {\r\n            _id: movie._id,\r\n            title: movie.title,\r\n            genre: movie.genre._id,\r\n            NumberStock: movie.numberInStock,\r\n            rate: movie.dailyRentalRate\r\n        };\r\n};\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <br/>\r\n            <h1 className=\"backk\">Movie Form</h1>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    {this.renderInput(\"title\", \"Title\")}\r\n                    {this.renderSelect('genre',\"Genre\",this.state.genres)}\r\n                    {this.renderInput(\"NumberStock\", \"Number in Stock\")}\r\n                    {this.renderInput(\"rate\", \"Rate\")}\r\n                    {this.renderButton(\"Submit\")}\r\n                </form>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MovieForm;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}